## 第4回課題提出
## 【課題内容】
* VPCの新規作成
* EC2とRDSの構築
* EC2からRDSへ接続
## VPCの作成
1 . VPCの作成
* リージョンの選択　（東京リージョン）
* IPv4CIDR （10.0.0.0/16)  
※IPアドレスの範囲は作成後の変更は不可。
## サブネットの作成
1 . パブリックサブネット
* VPCの選択
* アベイラビリティーゾーン　（ap-northeast-1a)
* IPv4 CIDRブロック　（10.0.10.0/24)

2 . プライベートサブネット
* VPCの選択
* アベイラビリティーゾーン　（ap-northeast-1a)
* IPv4 CIDRブロック　（10.0.20.0/24)
##  ルーティングの設定
1 . インターネットゲートウェイの作成、VPCへアタッチ

2 . ルートテーブルの作成、パブリックサブネットへの紐付け
## EC2構築
1 . EC2インスタンスの作成
* キー　（Name)
* 値　（任意のインスタンス名）
* リソースタイプ　（インスタンス）

2 . AMIの選択
* Amazon Linux2 (無料範囲内）

3 . インスタンスタイプ
* t2.micro

4 . キーペア（SSH秘密鍵）
* キーペアのタイプ　（RSA）
* プライベートキーファイル形式　（.pem)  
※キーのダウンロード　（ダウンロードしたファイルをCloud9にアップロードする必用がある）

5 . ネットワーク設定
* VPC　(作成済みのVPCを選択）
* サブネット　（作成済みのサブネットを選択）
* パブリックIPアドレスの自動割り当て　（有効）
* セキュリティグループの作成  
タイプ　（ssh)  
ソースタイプ　（カスタム）  
ソース　（0.0.0.0/0)

6 . ストレージの設定
* EBSボリューム　（汎用SSD gp2)

## SSH経由でEC2インスタンスに接続
* キーが公開されていないことを確認  
` chmod 400 *****.pem`  
` ssh -i "*****.pem" ec2-user@**.**.***.***`
* EC2インスタンスに接続できたことを確認  
※終了する際は`exit`

## RDS構築
* 複数のアベイラビリティーゾーンにサブネットを作成する  
（メインDBのAZに作成）  

1 . プライベートサブネットの作成  
* VPC (EC2があるVPC)  
* アベイラビリティーゾーン　（ap-northeast-1c)  
* IPv4 CIDRブロック　（10.0.21.0/24)  

2 . DB用のセキュリティグループの作成
* VPC (EC2があるVPC)
* タイプ　（MYSQL/Aurora)
* ソース　（EC2のセキュリティグループ）
## データベースの作成
* データベース作成方法　（標準作成)
* エンジンタイプ　（無料利用枠）

【接続】
* コンピューティングリソース　（接続しない）
* VPC （EC2があるVPC）
* DBサブネットグループ　（新規で作成）
* パブリックアクセス　（なし）
* VPCセキュリティグループ　（既存のセキュリティグループ）
* アベイラビリティーゾーン　（ap-northeast-1a)
## EC2からRDSに接続
* EC2インスタンスにMySQLをインストール  
`sudo yum install mysql`
* EC2に接続  
` ssh -i "*****.pem" ec2-user@**.**.***.***`
* RDSへ接続  
`mysql -u admin -p -h ******.******.ap-northeast-1.rds.amazonaws.com`  
【接続完了】  
![写真]
